<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Copyright (c) 1998, 1999 Nik Clayton, All rights reserved.

     Redistribution and use in source (SGML DocBook) and 'compiled' forms
     (SGML HTML, PDF, PostScript, RTF and so forth) with or without
     modification, are permitted provided that the following conditions
     are met:

      1. Redistributions of source code (SGML DocBook) must retain the above
         copyright notice, this list of conditions and the following
         disclaimer as the first lines of this file unmodified.

      2. Redistributions in compiled form (transformed to other DTDs,
         converted to PDF, PostScript, RTF and other formats) must reproduce
         the above copyright notice, this list of conditions and the
         following disclaimer in the documentation and/or other materials
         provided with the distribution.

     THIS DOCUMENTATION IS PROVIDED BY NIK CLAYTON "AS IS" AND ANY EXPRESS OR
     IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
     OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     DISCLAIMED. IN NO EVENT SHALL NIK CLAYTON BE LIABLE FOR ANY DIRECT,
     INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
     (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
     HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
     STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
     ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE
     POSSIBILITY OF SUCH DAMAGE.

-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="getstartedguide">
  <title>Getting Started Guide</title>

  <para>The &os; Documentation Project (<acronym>FDP</acronym>)
    maintains the &os; documentation set, including manual pages, the
    Handbook and <acronym>FAQ</acronym>, articles, and web
    pages.</para>

  <para>This Guide teaches the tools and methods of contributing to
    the <acronym>FDP</acronym>.  It also guides new translators
    through the translation creation process for existing &os;
    documentation.  The goal for this Guide is to provide new
    documentation contributors with the knowledge and tools to submit
    patches and translations to the &os; Documentation Project.  By
    the end of this guide, the reader will understand the
    documentation workflow and have all the tools to continue their
    contributions.</para>

  <para>Here are the topics covered in this Guide:</para>

  <itemizedlist>
    <listitem>
      <para>How to install and use the documentation tools.</para>
    </listitem>

    <listitem>
      <para>The &os; documentation layout and workflow.</para>
    </listitem>

    <listitem>
      <para>Edit existing and contribute new documentation.</para>
    </listitem>

    <listitem>
      <para>Submit a patch.</para>
    </listitem>

    <listitem>
      <para>Using the <acronym>PO</acronym>/gettext translation
	system.</para>
    </listitem>

    <listitem>
      <para>Working with other members of the documentation
	team.</para>
    </listitem>
  </itemizedlist>

  <para>By following this Guide, the reader will create at least
    one patch and know where to go for further assistance.</para>

  <para>Readers are recommended to have a &os; system with a graphical
    environment and networking enabled with an Internet connection to
    work alongside this Guide.</para>

  <sect1 xml:id="getstartedguide-conventions-trademarks">
    <title>Document Conventions and Trademarks</title>

    <para>Whenever a <keycap>%</keycap> is used as the prompt, it
      means this is a normal user executing the command that follows.
      A <keycap>#</keycap> prompt indicates the command needs to run
      with suberuser (<emphasis>root</emphasis) privileges.</para>

    <para>The &os; Documentation Project is referred to as the
      <acronym>FDP</acronym>.</para>

    <para>&os; is a registered trademark of the The &os; Foundation.
      &os; documentation is provided under the
      <link xlink:href="&url.base;/copyright/freebsd-doc-license.html">&os;
	Documentation License</link>.</para>
  </sect1>

  <sect1 xml:id="getstartedguide-introduction">
    <title>Introduction to the &os; Documentation Project</title>

    <para>The &os; Documentation Project (<acronym>FDP</acronym>)
      maintains the documentation for the &os; project.  Its purpose
      is to provide &os; users with instructions for configuring and
      using the features provided by the &os; operating system.  It is
      intended for new users who have little to no experience with a
      Unix-like system and users who want to learn more about the &os;
      operating system.</para>

    <para>The &os; documentation set includes a number of documents of
      different types.  Some of the most important ones are described
      here:</para>

    <itemizedlist>
      <listitem>
	<para><emphasis>The &os; Handbook:</emphasis> A resource for
	  users to learn about the features this operating system
	  provides.  Its main focus is towards users administrators of
	  &os; systems.</para>
      </listitem>

      <listitem>
	<para><emphasis><acronym>FAQ</acronym>:</emphasis> A
	  collection of frequently asked questions and their answers.
	  This resource provides users with a written source of
	  consistently maintained answers.</para>
      </listitem>

      <listitem>
	<para><emphasis>Manual pages:</emphasis> There are the manual
	  pages provided with the operating system using the
	  <citerefentry><refentrytitle>man</refentrytitle>
	    <manvolnum>1</manvolnum>
	  </citerefentry> format.  In &os;, manual pages are managed
	  outside the <emphasis>doc</emphasis> repository, as they
	  reside within the <emphasis>src</emphasis> repository.

      </listitem>

      <listitem>
	<para><emphasis>Articles:</emphasis> The &os; Project
	  maintains a collection of smaller articles.  These describe
	  certain things that do not fit into other documentation
	  categories, but are worth keeping around, sometimes for
	  historical reasons.</para>
      </listitem>

      <listitem>
	<para><emphasis>Books:</emphasis></para> This category
	  includes the Porter's Handbook, with instructions on how to
	  work with the ports system as a developer or
	  <emphasis>ports</emphasis> committer.  It also has the &os;
	  Developer's Handbook, intended for people who want to know
	  more about how &os; is developed and how some of its
	  subsystems work.</para>
      </listitem>

      <listitem>
	<para><emphasis>The &os; Website:</emphasis> The &os; Website
	  is maintained by the Documentation Project and can be built
	  like any other document using a
	  <filename>Makefile</filename>.<para>
      </listitem
    </itemizedlist>

    <para>The <acronym>FDP</acronym> also maintains the
      <link
	xlink:href="&url.base;/doc/en_us.ISO8859-1/books/fdp-primer/">FDP Primer</link>,
      which contains instructions for people who want to get involved
      in the &os; documentation project.  Starting from the tools
      being used, to formatting and indentation rules, it covers
      everything a person involved in &os; documentation needs to
      know.  It is used as a reference even by documentation
      committers who have been around for a long time.</para>

    <para>Translation projects for various countries and languages
      exist to translate &os; documentation into their respective
      languages.  Translated documentation helps users who do not
      speak English and who find it easier to understand the system
      when the instructions are written in their native
      language.</para>
  </sect1>

  <sect1 xml:id="getstartedguide-tools">
    <title>Get the Tools</title>

    <para>The <acronym>FDP</acronym> maintains the
      <filename>textproc/docproj</filename> meta-port. This provides
      the software needed to edit and build the &os; documentation.
      To save compilation time, we will install this software using
      the package.  As the default package does not include
      Japanese (<acronym>CJK</acronym>) support, translation tools, or
      a translation file editor, we will also install those
      packages.</para>

    <note>
      <para>Although manual editing of a <filetype>.po</filetype>
	(translation) file is possible, using a PO editor provides
	more comfort and error checking. We will use
	<application>PO edit</application> in this workshop, which is
	available from
	<link xlink:href="https://poedit.net"></link>.</para>
    </note>

    <para>To begin the package installations, become the superuser and
      type
	<screen>&prompt.root; <userinput>pkg install textproc/docproj</userinput></screen>
      Whenever prompted, type <keycap>y</keycap> to proceed.
      Based on which dependencies are already installed on your
      system, this package installation may take a few minutes, so
      wait until it is finished.</para>

    <para>Next, install the following packages.  Again, type
      <keycap>y</keycap> when prompted.  If you receive a message
      indicating a package is already installed, skip that package and
      proceed to the next package installation.</para>

    <screen>&prompt.root; <userinput>pkg install textproc/html2text</userinput>
&prompt.root; <userinput>pkg install japanese/font-ipa</userinput>
&prompt.root; <userinput>pkg install textproc/itstool</userinput>
&prompt.root; <userinput>pkg install editors/poedit</userinput></screen>

    <para>Once all the package installations are complete, leave the
      superuser account and type <command>rehash</rehash> to load the
      new binaries into your path.  You are now ready to move on to
      the next section to install the documentation source
      code.</para>

  </sect1>

  <sect1 xml:id="getstartedguide-source">
    <title>Get the Source</title>

    <para>Most of the &os; documentation, in all of the translated
      languages, lives in the doc repository.  This includes the &os;
      articles, the various handbooks, the <acronym>FAQ</acronym>, and
      the website, but not the manual pages as those are included in
      the base repository as part of the command being
      documented.</para>

    <para>In order to edit existing documentation, add new
      documentation, or translate documentation, you need to maintain
      a copy of that doc repository on your system and ensure it is
      kept synchronized with the official &os; repository.</para>

    <para>Before downloading the doc repository, decide where on your
      computer to store the local copy of the repository.  Since you
      will be using your regular user account when making doc changes,
      the location is typically somewhere in your home directory.  The
      first time you download the repository, it will be saved to your
      current working directory unless you specify where to save it.
      In this document, a subdirectory named
      <filename>freebsddoc</filename> is created a used as the
      location for downloading the repository.</para>

    <para>Ensure you are logged in as your regular user account and in
      your home directory before running these commands:</para>

    <screen>&prompt.user; <userinput>svnlite co https://svn.freebsd.org/doc/head ~/freebsddoc</userinput></screen>

    <para>It will take a few minutes to complete the download.  Note
      you only need to use the <command>svnlite co</command> (short
      for <command>checkout</command>) command once, for the initial
      download.  However, you should <emphasis>always</emphasis>
      verify you are synchronized with the repository
      <emphasis>before</emphasis> you start to make any doc changes.
      To check for any changes and to synchronize with the repository,
      run the <command>up</command> from within the directory to which
      you downloaded the repository.  In this document, it appears
      like this:</para>

    <screen>&prompt.user; <userinput>cd ~/freebsddoc</userinput>
&prompt.user; <userinput>svnlite up</userinput>
Updating '.':
At revision 48138</screen>

    <para>In this example, no changes have been downloaded since none
      have occurred since you last downloaded the repository.  If
      there had been changes, you would see something like
      this:</para>

    <screen>Updating '.':
U    zh_TW.UTF-8/books/porters-handbook/Makefile
U    zh_TW.UTF-8/books/parters-handbook/book.xml
At revision 48138.</screen>

    <para>In this example, there have been two updates (U) to the
      Chinese translation of the Porter's Handbook.  It is important
      to note the names of the files that have changed if you are
      making edits to those same files and have not yet submitted your
      changes for review.  You should also make note of the revision
      number as this may be needed during the translation
      process.</para>

  </sect1>

  <sect1 xml:id="getstartedguide-accounts">
    <title>Create Accounts</title>

    <para>Now that you have the necessary software and the
      documentation source, you should create a user account on the
      bug tracker and the review website.  You will need to be logged
      into the bug tracker in order to submit a patch and you will
      need to be logged into the review website in order to request a
      review of the patch.  It is also recommended to join the doc
      mailing list and, if you plan to assist with translations, the
      translations mailing list.</para>

    <sect2 xml:id="getstartedguide-bug-tracker">
      <title>Bug Tracker</title>

      <para>To create an account on the bug tracker, go to <link
	  xlink:href="https://bugs.&url.base;/bugzilla/createaccount.cgi"></link>.
	In the screen shown in Figure 1, input a valid email address
	and click the <literal>Send</literal> button.  Use an email
	address that you check often as any comments and updates
	regarding your patch are sent to that email address.</para>

      <para>Once you input your email address, the web page displays a
	message indicating you need to check your inbox for an
	activation email and to click on the link within the email to
	activate the account within three days.  When you click the
	link in the activation email, you will be prompted to set your
	password.

      <note>
	<para>Email addresses may be made publically available. The
	  user may wish to create a new email account only for &os;
	  contributions.</para>
      </note>

      <figure xml:id="bsdbugtracker-create-account">
	<title>Create an Account on the &os; Bug Tracker</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsdbugtracker-create-account"/>
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Once the account is activated, click the
	<literal>Log In</literal> link at the top of the page and
	enter your email address and password.  If you do not want
	your browser to cache the password, uncheck the
	<literal>Remember</literal> checkbox.  Click the
	<literal>Log in</literal> buytton.  You should now see a page
	similar to the one shown in this image:</para>

      <figure xml:id="bsdbugtracker-main-page-after-login">
	<title>Main Page of &os; Bug Tracker While Logged In</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsdbugtracker-main-page-after-login"/>
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Take a few minutes to click the
	<literal>Preferences</literal> link and to review the
	available preferences.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-review-website">
      <title>Review Website</title>

      <para>Next, go to <link
	  xlink:href="https://reviews.freebsd.org/auth/register/"></link>.
	In the screen shown in the next figure, input a username into
	the <literal>Real Name</literal> field, enter and confirm a
	password, and input an email address.  This often is the same
	address used for the bug tracker, but does not have to be.
	Make sure to use a valid email address that is checked often.
	All reviewer comments regarding a patch are sent to that email
	address.  Finally, type the text that appears in the
	<literal>CAPTCHA</literal> field and click the
	<literal>Register Phabricator Account</literal> button.  The
	web page displays a message indicating you need to check your
	inbox for an activation email and to use the instructions in
	the email to activate your account.</para>

      <figure xml:id="bsdreviewsite-create-account">
	<title>Create an Account on the &os; Review Website</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsdreviewsite-create-account"/>
	  </imageobject>
	</mediaobject>
      </figure>

    </sect2>

    <sect2 xml:id="getstartedguide-fdp-mailing-list">
      <title><acronym>FDP</acronym> Mailing List</title>

      <para>To subscribe to the &a.doc;, go to <link
	  xlink:href="http://lists.freebsd.org/mailman/listinfo/freebsd-doc"></link>.
	In the screen shown in the next image, input a valid email
	address into the <literal>Your email address</literal> field.
	If you wish, you can also enter your name and pick and confirm
	a password, or leave those fields empty. By default, you will
	receive an email for every message that is sent to this list.
	This is a low-traffic list which averages a few messages a
	day.  If you prefer to only receive one email a day containing
	all of the messages from the day, click the
	<literal>Yes</literal> button next to
	<literal>Would you like to receive list mail batched in a
	  daily digest?</literal>.  When finished, click the
	<literal>Subscribe</literal> button.  Again, you will receive
	a confirmation email with a link to click in order to finish
	subscribing to this list.</para>

      <figure xml:id="bsdmaillist-subscribe">
	<title>Subscribe to the <acronym>FDP</acronym> Mailing
	  List</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsdmaillist-subscribe"/>
	  </imageobject>
	</mediaobject>
      </figure>

      <para>If you wish, you can send an introductory email to this
	list to tell the other members of the list a little bit about
	yourself and your interest in &os; documentation.</para>
      <para>If you would like to review the archived messages for this
	mailing list, go to <link
	  xlink:href="http://lists.freebsd.org/pipermail/freebsd-doc/"></link>.
	The archives are listed by month, with this month's messages
	at the top of the list.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-translations-mailing-list">
      <title>Translations Mailing List</title>

      <para>If you are interested in translating existing &os;
	documentation into your native language, you should also
	subscribe to the translations mailing list.  To do so, go to
	<link
	  xlink:href="http://lists.freebsd.org/mailman/listinfo/freebsd-translators"></link>.
	This page is laid out the same as the <acronym>FDP</acronym>
	mailing list page so that you can subscribe to the list and
	view its archives.  Again, do not forget to reply to the
	confirmation email.  If you join this mailing list, you should
	send an introduction email indicating which languages you are
	interested in translating so other translators of the language
	know another person is available to assist with the
	translation.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-irc-channel">
      <title><acronym>IRC</acronym> Channel</title>

      <para>The <acronym>FDP</acronym> has its own
	<literal>#bsddocs</literal> channel on
	<literal>EFNET</literal>.  The <acronym>IRC</acronym> channel
	provides an opportunity to have near real-time conversations
	with other members of the documentation team.  This is useful
	if you want to discuss the best way to word a documentation
	improvement or have someone review a small patch before
	submitting it.  If you hang out on this channel frequently,
	you will also get a good idea of who is working on which bits
	of documentation.</para>

      <para>In order to join this <acronym>IRC</acronym> channel, you
	will need an <acronym>IRC</acronym> client.  Once you have an
	<acronym>IRC</acronym> client, input an
	<literal>EFNET</literal> server from the list at <link
	  xlink:href="http://www.efnet.org/?module=servers"></link>
	and join the <literal>#bsddocs</literal> channel.</para>

    </sect2>

  </sect1>

  <sect1 xml:id="getstartedguide-review-bugs">
    <title>Review Existing Bugs</title>

    <para>You now have everything you need to start contributing to
      the <acronym>FDP</acronym>.  Given the amount of existing
      documentation, it can be overwhelming when deciding where to
      start.  Using the &os; Bug Tracker is always recommended as
      a starting point.</para>

    <para>To see which documentation bugs are available, go to <link
	xlink:href="https://bugs.freebsd.org"></link>.  Make sure you
      are logged in (so you can interact with an existing bug) and
      click <literal>Search</literal>(4th option from the top-left).
      Select <literal>Documentation</literal> in the
      <literal>Product</literal>drop-down menu, the click the
      <literal>Search</literal> button.  The next image shows the
      search page.</para>

      <figure xml:id="bsddocbugs-search">
	<title>Search for Documentation Bugs</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsddocbugs-search"/>
	  </imageobject>
	</mediaobject>
      </figure>

    <para>The results of the search are displayed as seen in the
      example shown in the next image:</para>

      <figure xml:id="bsddocbugs-list-docbugs">
	<title>List of Documentation Bugs</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsddocbugs-list-docbugs"/>
	  </imageobject>
	</mediaobject>
      </figure>

    <para>To sort the bug list by date (oldest first), click the
      <literal>ID</literal> link.  If you click it again, it reverses
      the sorting (newest first).  Also, note who is assigned to each
      bug.  If a person's email address is listed, that person is
      handling the bug.  Typically, this means you don't work on that
      bug unless you have talked to that person and have agreed to
      help them.  If it is assigned to
      <literal>freebsd-doc@FreeBSD.org</literal>, then no one has
      <emphasis>taken</emphasis> the bug to work on it.  To sort the
      bug list by assignee, click the <literal>Assignee</literal>
      link.  To see the details of a bug, click its number.  The
      details include the initial report, any existing patches, and
      all comments about the bug.</para>

    <para>Find a bug that you can fix.  This may require reviewing an
      existing patch to see if it is correct, or deciding upon some
      text that addresses a documentation deficiency.</para>

  </sect1>

  <sect1 xml:id="getstartedguide-make-test-edits">
    <title>Make and Test Edits</title>

    <para>After finding a bug to fix, open the proper source file
      to address the patch.</para>

    <sect2 xml:id="getstartedguide-find-file">
      <title>Find the File to Edit</title>

      <para>As an example, consider a bug which requires a fix to the
	&os; Handbook.  A listing of the local copy of the doc
	repository shows:</para>

      <screen>&prompt.user; <userinput>cd ~/freebsddoc</userinput>
&prompt.user; <userinput>ls</userinput>
bn_BD.UTF-8      en_US.ISO8859-1  it_IT.ISO8859-15 mn_MN.UTF-8      pt_BR.ISO8859-1  sr_YU.ISO8859-2  zh_TW.UTF-8
da_DK.ISO8859-1  es_ES.ISO8859-1  ja_JP.eucJP      nl_NL.ISO8859-1  README	     tr_TR.ISO8859-9
de_DE.ISO8859-1  fr_FR.ISO8859-1  ko_KR.UTF-8      no_NO.ISO8859-1  ru_RU.KOI8-R     x11.diff.txt
el_GR.ISO8859-7  hu_HU.ISO8859-2  Makefile	   pl_PL.ISO8859-2  share	     zh_CN.UTF-8</screen>

      <para>Note there is a directory for each available language.
	Here is a listing for the English language
	subdirectory:</para>

      <screen>&prompt.user; <userinput>ls en_US.ISO8859-1/</userinput>
articles     books	  captions   flyer      htdocs
Makefile     Makefile.inc share      slides</screen>

      <para>Here, the English documentation has been divided by
	<emphasis>articles</emphasis>, the various
	hand<emphasis>books</emphasis>, the website
	(<emphasis>htdocs</emphasis>), and <filetype>XML</filetype>
	elements used by all of the English documentation.  Here is a
	listing of the <literal>books</literal> subdirectory:</para>

      <screen>&prompt.user; <userinput>ls en_US.ISO8859-1/books/</userinput>
arch-handbook   design-44bsd   developers-handbook    fdp-primer    Makefile	    pmake
bibliography    dev-model      faq		      handbook      Makefile.inc    porters-handbook</screen>

      <para>And a listing for the &os; Handbook's subdirectory:</para>
      <screen>&prompt.user; <userinput>ls en_US.ISO8859-1/books/handbook/</userinput>
advanced-networking chapters.ent	eresources	    kernelconfig	multimedia	    security
audit		    colophon.xml	filesystems	    l10n		network-servers     serialcomms
basics		    config		firewalls	    linuxemu		pgpkeys		    txtfiles.ent
bibliography	    cutting-edge	geom		    mac			ports		    virtualization
book.xml	    desktop		index.xml	    mail		ppp-and-slip	    x11
boot		    disks		introduction	    Makefile		preface		    zfs
bsdinstall	    dtrace		jails		    mirrors		printing</screen>

      <para>Note there is a subdirectory for each chapter of the
	Handbook and the name usually matches the name of the chapter.
	Do a listing of each subdirectory to see that it (usually)
	contains a file named <filename>chapter.xml</filename>.  So,
	to edit the <emphasis>Security</emphasis> chapter of the &os;
	Handbook, edit
	<filename>~/freebsddoc/en_US.ISO8859-1/books/handbook/security/chapter.xml</filename>.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-configure-editor">
      <title>Configure Editor</title>

      <para>The <filetype>.xml</filetype> files in the doc repository
	are <acronym>ASCII</acronym> text files marked up using
	<literal>Docbook XML</literal>.  Use an
	<acronym>ASCII</acronym> text editor to edit these files.
	Before making any edits, double-check the editor is configured
	with these settings:</para>

      <itemizedlist>
	<listitem>
	  <para>Word wrap set to 70 characters.</para>
	</listitem>

	<listitem>
	  <para>Tab stops set to 2.</para>
	</listitem>

	<listitem>
	  <para>Replace each group of 8 leading spaces with a single
	    tab.</para>
	</listitem>
      </itemizedlist>

      <para>Configuring these settings varies by text editor.
	Configurations for <application>vim</application>,
	<application>emacs</application>, and
	<application>nano</application> are listed at <link
	  xlink:href="&url.base;/doc/en_US.ISO8859-1/books/fdp-primer/editor-config.html></link>.
	Graphical text editors like <application>kate</application> or
	<application>kwrite</application> can be configured using
	their <emphasis>Settings</emphasis> menu.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-make-edits">
      <title>Making Edits</title>

      <para>Once the editor is configured, open the file to edit and
	make any changes.  Depending on the edit, assistance may be
	needed in determining which formatting tags are required.  For
	most edits, use the formatting tags and indentation in the
	surrounding text to determine how to format your edits.  The
	<literal>XML Primer</literal> at <link
	  xlink:href="&url.base;/doc/en_US.ISO8859-1/books/fdp-primer/xml-primer.html></link>
	is available for reference.  However, there are only about a
	dozen tags that are regularly used.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-run-igor">
      <title>Run <program>igor</program></title>

      <para>The <acronym>FDP</acronym> provides a utility named
	<application>igor</application> to assist with finding
	formatting, grammatical, and spelling errors. Once any edits
	are saved, run <application>igor</application> and specify the
	name of the edited file.  This example checks the
	<filetype>XML</filetype> file of the
	<emphasis>Security</emphasis> chapter and
	<application>igor</application> provides some feedback about
	the file:</para>

      <screen>&prompt.user; <userinput>igor ~/freebsddoc/en_US.ISO8859-1/books/handbook/security/chapter.xml</userinput>
chapter.xml:374:spelling:Alternatively, if [noone] else can see your terminal now, you can
chapter.xml:1589:bad phrase:	will work, but [the A[ and PTR records must be correct
and
chapter.xml:2532:contraction:The authenticity of host 'example.com (10.0.0.1)' [can't] be
established.
chapter.xml:2573:repeated:	<screen>&prompt.root; <userinput>scp
<replaceable>user@example.com:/[COPYRIGHT COPYRIGHT]</replaceable></userinput>
chapter.xml:2866:use tabs instead of spaces:[        ]use the &man.service.8;
command:</para>
chapter.xml:2869:blank line with whitespace:[        ]
chapter.xml:2869:use tabs instead of spaces:[        ]
chapter.xml:3060:repeated:	<programlisting>drwx------  2 [robert
robert]  512 Dec 27
11:54 private
chapter.xml:3061:repeated:drwxrwx---+ 2 [robert  robert]  512 Dec 23 10:57 directory1
chapter.xml:3062:repeated:drwxrwx---+ 2 [robert  robert]  512 Dec 22 10:20 directory2
chapter.xml:3063:repeated:drwxrwx---+ 2 [robert  robert]  512 Dec 27 11:57 directory3
chapter.xml:3064:repeated:drwxr-xr-x  2 [robert  robert]  512 Nov 23 11:54
public_html</programlisting></screen>

      <para>When checking a file you edited, only concern yourself
	with lines you edited.  For example, if you made edits to
	lines 2860-2870, review <emphasis>only</emphasis> those lines
	in the <application>igor</application> output.  In this
	example, <application>igor</application> indicates that tabs
	were not properly used in lines 2866 and 2869, and there is an
	extra whitespace in blank line 2869.  Resolve any issues
	introduced by your edits. Rerun
	<application>igor</application> until satisfied that all edits
	are formatted correctly.</para>

    </sect2>

    <sect2 xml:id="getstartedguide-build-test">
      <title>Build Test</title>

      <para>Next, ensure any edits do not break the build of the &os;
	documentation and that all formatting tags used render
	properly.  If changes are made to the &os; Handbook, run this
	command from the root directory for the handbook:</para>

      <screen>&prompt.user; <userinput>cd ~/freebsddoc/en_US.ISO8859-1/books/handbook</userinput>
&prompt.user; <userinput>make</userinput></screen>

      <para>This produces a lot of build output, but should not fail
	with an error.  If the build is successful, it creates an
	<filetype>HTML</filetype> file for each chapter of the
	Handbook.  For example, to test a change to the Security
	chapter, open
	<filename>/usr/home/YOURNAME/freebsd/en_US.ISO8859-1/books/handbook/security.html</filename>
	in a web browser and verify all edits look properly
	formatted.</para>

    </sect2>

  </sect1>

  <sect1 xml:id="getstartedguide-create-submit-patch">
    <title>Create and Submit a Patch</title>

    <para>Once the build is verified, it is time to create a patch for
      submission.  To create the patch, run
      <command>svn diff --diff-cmd=diff -x -U9999999 > [chapter].diff.txt</command>
      from the root directory of your local doc repository and specify
      the name of the patch to create.  When naming the patch, use the
      format <filename>chaptername.diff.txt</filename>.  This example
      creates a patch of the edits to the Security chapter of the
      Handbook.

    <screen>&prompt.user; <userinput>cd ~/freebsddoc</userinput
&prompt.user; <userinput>svnlite diff > security.diff.txt</userinput>
&prompt.user; <userinput>more security.diff.txt</userinput>
Index: en_US.ISO8859-1/books/handbook/security/chapter.xml
=====================================================================
--- en_US.ISO8859-1/books/handbook/security/chapter.xml (revision 48145)
+++ en_US.ISO8859-1/books/handbook/security/chapter.xml (working copy)
@@ -27,6 +27,8 @@
   <sect1 xml:id="security-synopsis">
     <title>Synopsis</title>

+    <para>This is where I made my changes.</para>
+
     <para>Security, whether physical or virtual, is a topic so broad
       that an entire industry has evolved around it.  Hundreds of
       standard practices have been authored about how to secure</screen>

    <para>Note it is important to create the patch in the root
      directory of the local repository.  This ensures the
      <quote>Index</quote> line in the patch contains the full path to
      the edited file so the patch reviewer has this information.  In
      this simple example, a new paragraph followed by an empty line
      was added to the Synopsis section of this chapter.</para>

    <sect2 xml:id="getstartedguide-submit-patch">
      <title>Submit the Patch</title>

      <para>Once a patch is created, open the related bug ticket.
	Click the <quote>Add an Attachment</quote> link which opens
	the screen shown in the next image.</para>

      <figure xml:id="bsddocbugs-attach-patch">
	<title>Attach the Patch to the Bug Report</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="[CHAPTERNAME]/bsddocbugs-attach-patch"/>
	  </imageobject>
	</mediaobject>
      </figure>

    <para>Be sure to complete these elements:</para>

    <itemizedlist>
      <listitem>
	<para>Click the <quote>Browse</quote> button to browse to
	  the location of the patch.</para>
      </listitem>

      <listitem>
	<para>Check the box next to
	  <quote>If the attachment is a patch, check the box
	    below</quote>.</para>
      </listitem>

      <listitem>
	<para>Enter a comment describing the patch in the
	  <quote>Comment</quote> box.</para>
      </listitem>

      <listitem>
	<para>Keep the <quote>Add me to CC list</quote> box checked
	  to receive notifications about comments added to the
	  patch.</para>
      </listitem>
    </itemizedlist>

    <para>When finished, click the <quote>Submit</quote> button.  Wait
      for a &os; committer to review the patch.  Once the review is
      complete, the reviewer will commit the patch and close the bug
      report.  Congratulations! You just made a change to the &os;
      documentation!</para>

    </sect2>

  </sect1>

  <sect1 xml:id="getstartedguide-use-review-system">
    <title>Using the Review System</title>

    <sect2 xml:id="getstartedguide-client-setup">
      <title>Client Setup</title>

    </sect2>

    <sect2 xml:id="getstartedguide-create-cli-revision">
      <title>Create a Revision using the Command Line Client</title>

    </sect2>

    <sect2 xml:id="getstartedguide-create-web-revision">
      <title>Create a Revision using the Web Interface</title>

    </sect2>

  </sect1>

  <sect1 xml:id="getstartedguide-use-translation-system">
    <title>Using the Translation System</title>

    <sect2 xml:id="getstartedguide-initial-workspace-setup">
      <title>Initial Workspace Setup</title>
      
      <para>FreeBSD has begun to use a PO/gettext translation system 
        that allows translators to automatically extract 
        strings from a document that needs to be translated. The 
        strings are then loaded into a PO editor, which supports 
        editing these strings and offers suggestions of previously 
        translated strings for re-use.</para>

      <para>For a new translation, the doc build system needs to 
        have a working Makefile. The following example copies the 
        English Makefile for the Leap Seconds article; replace
        fr_FR.ISO8859-1 with the directory name of the language you
        wish to translate to:</para> 

      <screen>&prompt.user; <userinput>cp ~/doc/en_US.ISO8859-1/
      articles/leap-seconds/Makefile \ ~/doc/fr_FR.ISO8859-1/articles
      /leap-seconds/</userinput> </screen>
    </sect2>

    <sect2 xml:id="getstartedguide-extracting-strings">
      <title>Extracting strings</title>
      
      <para>Then, extract all the strings to be translated from the document:</para>

      <screen>&prompt.user; <userinput>cd ~/doc/fr_FR.ISO8859-1/
      articles/leap-seconds/</userinput><userinput>make po</userinput></screen>
      <para>This creates a new file in that directory called
        fr_FR.po that contains all the strings from the document to
        translate.</para>
    </sect2>

    <sect2 xml:id="getstartedguide-using-po-editor">
      <title>Using a PO Editor</title>
      <para>To start translating, open the file fr_FR.po in the 
        poedit editor:</para>

% poedit fr_FR.po

As seen in Figure 9, the left side of the editor displays all the strings from the English document. The right side lists any strings for which a translation already exists.

Figure 9: Translating a File Using poedit
[Image]
The Source text window displays the currently selected string in English. Use the Translation field below to enter the translation that matches that string.

The following tips and rules should help you with the translation process:

Preserve XML tags: do not translate strings that are XML tags like <para> or </para>. They are needed by the doc build system to mark up the output in a certain way.

Preserve spaces: do not change the spacing at the beginning and end of the strings in your translation.  If there were spaces before or after the English string, they should also be entered in the translated version. This is especially true for everything within <programlisting> and <screen> tags. All spaces must remain as they were in the original version.

Preserve verbatim tags: these tags do not need to be translated:
<citerefentry>
<command>
<filename>
<literal>
<manvolnum>
<orgname>
<package>
<programlisting>
<prompt>
<refentrytitle>
<screen>
<userinput>
<varname>

Version Control strings: things like $FreeBSD$ do not need to be translated, as they are replaced with a version number and other information upon checking the file into FreeBSD's version control system.

Names of products, places, author names, and filenames like Makefile do not need to be translated. When in doubt, do not translate and discuss these within your translation group or ask a documentation committer.

Create a word list: over time, you will find that you are translating the same string over and over again. In this case, it is good to create a word list that other translators can use. This is especially helpful for difficult words and will create better consistency over time as the same word can be reused in the same context, but in other sections or documents. 
    </sect2>

  <sect2 xml:id="getstartedguide-generate-translated-document">
    <title>Generating the Translated Document</title>
After translating a couple of strings or even the whole document, follow these instructions to see what the translated document looks like. First, save your edited document and close poedit. Then generate the translated document:

% cd ~/doc/fr_FR.ISO8859-1/articles/leap-seconds/
% make tran

You can then create an HTML document in order to view it in a web browser. This example generates the HTML then opens it in the Firefox web browser on a graphical desktop:

% make && firefox article.html

Repeat these steps, beginning with make po, to continue to work on the translation.
    </sect2>
  <sect1 xml:id="getstartedguide-create-patch-submission">
    <title>Creating a Patch for Submission</title>
    
    <para>When the translation is finished, create a patch and 
      submit it to the &os; project so that it becomes part of
      the official documentation set.  Start by adding 
      <literal>#$FreeBSD$</literal> as the 
      <emphasis>first line</emphasis> of the PO document.

    <para>This will later be replaced by the version control system 
      with a date timestamp and author information so that other
      people know when this file was last changed.</para>

    <para>Next, add the <filename>.po file</filename>, the 
      <filename>Makefile</filename>, and the translated
      <filename>article.xml</filename> to version control as part of
      the patch:</para>

      <screen>&prompt.user; <userinput>cd ~/doc/fr_FR.ISO8859-1/
      articles/leap-seconds/</userinput>
      &prompt.user; <userinput>svnlite add Makefile 
      article.xml fr_FR.po</userinput>
      A         Makefile
      A         article.xml
      A         fr_FR.po</screen>

    <para>Set these properties on those files:</para>

      <screen>&prompt.user; <userinput>% svnlite propset 
      svn:keywords FreeBSD=%H Makefile article.xml fr_FR.po
      </userinput>
      property 'svn:keywords' set on 'Makefile'
      property 'svn:keywords' set on 'article.xml'
      property 'svn:keywords' set on 'fr_FR.po'</screen>

    <para>Next, set the proper MIME types for the files. Usually, 
      this is the UTF-8 character set, but check for your local
      language encoding.  To prevent the version control system from
      mistaking these files as binary data, the <literal>
      fbsd:notbinary</literal>property must also be set:</para>

      <screen> &prompt.user; <userinput>svnlite propset 
      svn:mime-type \'text/x-gettext-translation; charset=UTF-8' 
      fr_FR.po </userinput>
      property 'svn:mime-type' set on 'fr_FR.po'
      &prompt.user; <userinput>svnlite propset fbsd:notbinary yes 
      fr_FR.po</userinput>
      property 'fbsd:notbinary' set on 'fr_FR.po'
      &prompt.user; <userinput>svnlite propset svn:mime-type 'text/
      xml; charset=UTF-8' article.xml</userinput>
      property 'svn:mime-type' set on 'article.xml'
      &prompt.user; <userinput>svnlite propset fbsd:notbinary yes 
      article.xml</userinput>
      property 'fbsd:notbinary' set on 'article.xml'</screen>

    <para>Since the <filename>Makefile</filename> is properly 
      recognized, there is no need to add the MIME types for this 
      file.</para>

    <para>Finally, the patch is created <emphasis>from the top-level 
      directory:</emphasis></para>

      <screen>&prompt.user; <userinput>cd ~/doc </userinput>
      <userinput>svnlite diff fr_FR.ISO8859-1/articles/leap-seconds \
      > /tmp/fr_FR-leap-seconds.diff</userinput></screen>

    <para>The patch file in 
      <filename>/tmp/fr_FR-leap-seconds.diff</filename>contains all 
      the information to generate the translated document and can be 
      submitted using the FreeBSD bug tracker.</para>
  </sect1>

  <sect1 xml:id="getstartedguide-coming-attractions">
    <title>Coming Attractions</title>
      
    <para>The &os; Project is committed to 
      maintaining high quality documentation and translations.  
      The tools and processes are constantly evolving to make it 
      easier for those who wish to help with the documentation 
      project.</para>
      
    <para>This section describes some of the tools that are 
      currently under consideration and testing for possible 
      integration into the documentation or translation workflow.  During BSDCan, drop by the Doc Lounge room in the evenings 
      for further discussion and demonstrations of these tools.    
      After BSDCan, discussion and status reports on these and 
      other tools will be available on the &a.doc or the 
      EFnet #bsddocs <acronym>IRC</acronym> channel.</para>
  
    <orderedlist>
      <listitem>   
        <para>Annotator <link xlink:href="http://annotatorjs.org/">
          </link> allows the addition of inline comments to an
          existing web page, using a web browser.  
          This makes it easy for people to 
          review a document and make suggestions for 
          corrections or improvements.  This year, the 
          <acronym>FDP</acronym> aims to announce a schedule of 
          time-limited reviews of individual
          sections of the &os; Handbook.</para>
      </listitem>

      <listitem>
        <para><link xlink:href="http://pootle.translatehouse.org"> 
          Pootle</link> and <link xlink:href="https://weblate.org/en"
          >Weblate</link> are open source web-based PO translation
          systems that allow translators to use their web browser as
          a PO editor.  These systems share translation memory 
          between translators and can be configured to automatically
          commit translated strings for easy updates of translated
          documents.</para>
      </listitem>

    <listitem>
    <para>&os; uses the Subversion version control system.  
      However, we have started to work on a Github to Subversion 
      bridge.  When complete, users will be able to submit git pull 
      requests for documentation and translation updates.</para>
    </listitem>

    <listitem>
    <para>&os; is currently reviewing its formats for publishing the 
      documentation.  Currently, the documentation is available in 
      HTML and compressed HTML, PDF and compressed PDF, compressed
      Postscript, and compressed text.  The ePUB format is currently
      a work in progress.  Some formats may be retired and other
      formats may be considered.</para>
    </listitem>
  </orderedlist>

  </sect1>
</chapter>
